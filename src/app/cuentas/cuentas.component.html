<div class="container">

    <div class="mb-4 p-5 border-bottom texto-secundario shadow">
        <h1>Bienvenido {{usuario}} a tu Área personal</h1>
        <p>Consulta tu saldo total o elige una cuenta para ver más detalles, operar o consultar movimientos</p>
    </div>
    <ng-container *ngIf="yaTieneCuentas()">
        <div class="my-4 border-bottom fondo-primario texto-resaltado shadow d-flex">
            <div class="mt-4 ms-5 flex-fill justify-content-end">
                <h2>Saldo total disponible:</h2>
                <h5 class="ms-5 pt-4">Atesoras en nuestras arcas un total de {{saldoTotal | currency:'EUR':''}}€</h5>
            </div>

            <img src="assets/boveda.png" class="w-25 float-end">
        </div>
        <div class="my-4 p-5 border-bottom shadow">
            <h2 class="texto-secundario mb-3" id="tusCuentas">Tus cuentas:</h2>
            <div *ngFor="let cuenta of cuentas, let i = index" class="mt-4 border-bottom ms-5 lineaCuenta" role="button"
                (click)="elegirCuenta(cuenta.number, cuenta.id)" routerLink="/detalles">
                <div class="d-flex justify-content-between texto-resaltado p-2">
                    <h5>
                        <p><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-book mx-2 mb-1"
                                width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"></path>
                                <path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"></path>
                                <path d="M3 6l0 13"></path>
                                <path d="M12 6l0 13"></path>
                                <path d="M21 6l0 13"></path>
                            </svg>{{cuenta.number}}
                        </p>
                    </h5>
                    <div>
                        SALDO DE LA CUENTA:
                        {{saldo[i] | currency:'EUR':''}}€
                    </div>
                </div>
                <div class="d-flex justify-content-between texto-secundario mb-3">
                    <h6 class="ms-4">{{cuenta.typeAccount.description}}</h6>
                </div>
            </div>
        </div>
    </ng-container>

    <div class="my-4 p-5 fondo-primario texto-resaltado shadow">
        <h2 class="mb-3">Crea tu cuenta en segundos:</h2>
        <div class="p-5 d-flex me-5">
            <img src="assets/cajero.png" class="cajero float-start">
            <div class="mx-5 justify-content-end bg-white p-5">                
                <div *ngIf="mostrarLoading, else bloqueCuentas">
                    <div class="mx-auto mt-5 bg-white">
                        <div class="align-items-center">
                            <div class="align-items-center d-flex justify-content-center">
                                <img src="assets/loadingBraille.gif" class="w-25">
                            </div>
                            <div class="p-2 mt-3 align-items-center d-flex justify-content-center">
                                <strong>Loading...</strong>
                                <div class="spinner-border m-2" role="status" aria-hidden="true"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <ng-template #bloqueCuentas class="bloqueCrearCuenta mt-3 pt-2">
                    <h3 class="mb-4">Nuestros expertos financieros recomiendan:</h3>
                    <div *ngFor="let typesAccount of typesAccounts"
                        class="shadow texto-secundario pt-2 px-4 mt-4 mb-5 cuentaFlayer border-bottom">
                        <div>
                            <h4 class="text-center">{{typesAccount.description}}</h4>
                            <div class="fondoFlayer">
                                <h6 class="mx-2 p-2">Disfruta de las ventajas del banco online con la
                                    {{typesAccount.description.toLowerCase()}} que se adapta a tí y los tuyos.</h6>
                                <h3 class="text-center"
                                    (click)="crearCuenta(typesAccount._links.self.href.substring(typesAccount._links.self.href.lastIndexOf('/')+1))">
                                    La quiero ya!</h3>
                            </div>                            
                            <p class="text-start px-1">Consulta condiciones con tu gestor</p>
                        </div>                        
                    </div>
                </ng-template>                
            </div>
        </div>
    </div>
</div>